webpackJsonp([1],{GI1X:function(t,e){},"K/44":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var l=n("VU/8")({name:"App"},i,!1,function(t){n("K/44")},null,null).exports,s=n("/ocq"),r=n("162o"),o={data:function(){return{dots:""}},mounted:function(){var t=this,e=0;Object(r.setInterval)(function(){e++,e%=5;for(var n=".",a=0;a<e;a++)n+=".";t.dots=n},500)}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"calling-banner"},[this._m(0),this._v(" "),e("div",{staticClass:"calling-text"},[this._v("\n    calling\n    "),e("br"),this._v("\n    "+this._s(this.dots)+"\n  ")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"image-wrapper"},[e("i",{staticClass:"fas fa-phone"})])}]};var d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"modal"}},[n("div",{staticClass:"call-accept-modal-wrapper"},[n("div",{staticClass:"modal-container"},[n("div",{staticClass:"text-wrapper"},[t._v("INCOMMING CALL")]),t._v(" "),n("div",{staticClass:"button-wrapper"},[n("button",{staticClass:"accept",on:{click:function(e){return t.$emit("accept")}}},[n("i",{staticClass:"fas fa-phone"})]),t._v(" "),n("button",{staticClass:"decline",on:{click:function(e){return t.$emit("decline")}}},[n("i",{staticClass:"fas fa-phone-slash"})])])])])])},staticRenderFns:[]};var u={video:!0,audio:!0},m={data:function(){return{onCall:!1,showCallingBanner:!1,isCalling:!1,showIncommingCallBanner:!1,callEventEmitter:new EventTarget,remoteCallId:"",peerId:"",peer:null,call:null}},mounted:function(){this.initiate()},components:{CallingBanner:n("VU/8")(o,c,!1,function(t){n("o7RS")},null,null).exports,IncommingCallBanner:n("VU/8")(null,d,!1,function(t){n("nGWX")},null,null).exports},methods:{accept:function(){this.callEventEmitter.dispatchEvent(new Event("accept")),this.showIncommingCallBanner=!1},decline:function(){this.showIncommingCallBanner=!1},peerCall:function(){var t=this;this.showCallingBanner=!0;this.remoteCallId;navigator.getUserMedia(u,function(e){t.peer.call(t.remoteCallId,e).on("stream",function(n){t.showCallingBanner=!1,t.onCall=!0;var a=document.getElementById("remoteStreamVideo");document.getElementById("localStreamVideo").srcObject=e,a.srcObject=n})},function(t){console.log("Failed to get local stream",t)})},endCall:function(){this.onCall=!1,this.showCallingBanner=!1,this.isCalling=!1,this.showIncommingCallBanner=!1,this.initiate()},initiate:function(){var t=this;this.peerId="trd-"+Math.floor(1e4*Math.random()),this.peer=new Peer(this.peerId),this.peer.on("call",function(e){t.onCall||navigator.getUserMedia(u,function(n){t.showIncommingCallBanner=!0,t.callEventEmitter.addEventListener("accept",function(a){e.answer(n),e.on("stream",function(e){t.showCallingBanner=!1,t.onCall=!0,document.getElementById("remoteStreamVideo").srcObject=e,document.getElementById("localStreamVideo").srcObject=n}),t.callEventEmitter=new EventTarget})},function(t){console.log("Error occured",t)})})}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.showIncommingCallBanner?n("incomming-call-banner",{on:{decline:t.decline,accept:t.accept}}):t._e(),t._v(" "),t.showCallingBanner?n("calling-banner"):t._e(),t._v(" "),n("div",{class:t.onCall?"top-wrapper on-call":"top-wrapper"},[n("div",{staticClass:"id-text"},[n("span",[t._v("ID :")]),t._v("\n      "+t._s(t.peerId)+"\n    ")])]),t._v(" "),t.onCall?t._e():n("div",{staticClass:"call-wrapper"},[t._m(0),t._v(" "),n("div",{staticClass:"banner"},[t._v("Konuşmanın peer'i")]),t._v(" "),n("div",{staticClass:"form-wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.remoteCallId,expression:"remoteCallId"}],attrs:{placeholder:"Peer id giriniz",type:"text"},domProps:{value:t.remoteCallId},on:{input:function(e){e.target.composing||(t.remoteCallId=e.target.value)}}}),t._v(" "),n("button",{on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.peerCall(e)},click:t.peerCall}},[t._v("CALL")])])]),t._v(" "),t.onCall?n("div",{staticClass:"video-wrapper"},[t._m(1),t._v(" "),n("div",{staticClass:"self-video"},[n("video",{staticStyle:{"background-color":"gray",width:"100%",height:"auto"},attrs:{muted:"",autoplay:"",playinline:"",id:"localStreamVideo"},domProps:{muted:!0}})]),t._v(" "),n("div",{staticClass:"call-menu-bar"},[n("button",{staticClass:"end-call",on:{click:t.endCall}},[n("i",{staticClass:"fa fa-phone"})])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("span",{staticClass:"one"},[this._v("PEER")]),this._v(" "),e("span",{staticClass:"two"},[this._v("TALK")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"remote-video"},[e("video",{staticStyle:{"background-color":"black",width:"auto",height:"100vh"},attrs:{autoplay:"",playinline:"",id:"remoteStreamVideo"}})])}]};var v=n("VU/8")(m,p,!1,function(t){n("GI1X")},null,null).exports;a.a.use(s.a);var h=new s.a({routes:[{path:"/",name:"IndexPage",component:v}],mode:"history"});a.a.config.productionTip=!1,new a.a({el:"#app",router:h,components:{App:l},template:"<App/>"})},nGWX:function(t,e){},o7RS:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.34d2450508441553e1a8.js.map